<p-confirmDialog></p-confirmDialog>
<p-toast position="top-right"></p-toast>

<div class="flex justify-end items-center px-6 pt-6">
  <button
    type="button"
    class="text-green-700 hover:text-white border border-green-700 hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2 dark:border-green-500 dark:text-green-500 dark:hover:text-white dark:hover:bg-green-600 dark:focus:ring-green-800"
    (click)="router.navigate(['/agregarUsuarios'])"
  >
    <i class="pi pi-plus-circle mr-2"></i> Agregar Usuario
  </button>
</div>

<div class="max-w-7xl mx-auto px-6 py-8">
  <p-table
    [value]="usuarios"
    showGridlines
    [paginator]="true"
    [rows]="5"
    [rowsPerPageOptions]="[5, 10, 20]"
    [tableStyle]="{ 'min-width': '50rem' }"
    class="shadow-xl rounded-xl bg-white dark:bg-gray-900 text-gray-800 dark:text-white"
  >
    <ng-template pTemplate="header">
      <tr class="bg-blue-50 dark:bg-gray-800 text-gray-800 dark:text-gray-100">
        <th>Nombre</th>
        <th>Correo Electronico</th>
        <th>Tipo Usuario</th>
        <th class="text-center">Acciones</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-usuario>
      <tr
        class="hover:bg-blue-50 dark:hover:bg-gray-800 transition-colors duration-200"
      >
        <td class="py-2 px-4">{{ usuario.name }}</td>
        <td class="py-2 px-4">{{ usuario.email }}</td>
        <td class="py-2 px-4">
          <span
            class="px-3 py-1 rounded-full text-xs font-semibold"
            [ngClass]="
              usuario.rol === 1
                ? 'bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-white'
                : 'bg-green-100 text-green-800 dark:bg-green-700 dark:text-white'
            "
          >
            {{ usuario.rol === 1 ? "Administrador" : "Cliente" }}
          </span>
        </td>

        <td class="py-2 px-4 text-center">
          <div class="flex justify-center gap-2">
            <button
              pButton
              icon="pi pi-pencil"
              class="p-button-sm p-button-rounded !bg-blue-100 !border-blue-400 !text-blue-600 hover:!bg-blue-400 hover:!text-white transition-all"
              (click)="editarUsuario(usuario)"
              pTooltip="Editar"
              tooltipPosition="top"
            ></button>
            <button
              pButton
              icon="pi pi-trash"
              class="p-button-sm p-button-rounded !bg-red-100 !border-red-400 !text-red-600 hover:!bg-red-400 hover:!text-white transition-all"
              (click)="eliminarUsuario(usuario)"
              pTooltip="Eliminar"
              tooltipPosition="top"
            ></button>
          </div>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>

